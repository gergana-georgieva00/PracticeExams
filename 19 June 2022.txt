create database Zoo

create table Owners
(
	Id int primary key identity,
	[Name] varchar(50) not null,
	PhoneNumber varchar(15) not null,
	[Address] varchar(50)
)

create table AnimalTypes
(
	Id int primary key identity,
	AnimalType varchar(30) not null
)

create table Cages
(
	Id int primary key identity,
	AnimalTypeId int foreign key references AnimalTypes(Id) not null
)

create table Animals
(
	Id int primary key identity,
	[Name] varchar(30) not null,
	BirthDate Date not null,
	OwnerId int foreign key references Owners(Id),
	AnimalTypeId int foreign key references AnimalTypes(Id) not null
)

create table AnimalsCages
(
	CageId int not null,
	AnimalId int not null,
	primary key(CageId, AnimalId),
	foreign key (CageId) references Cages(Id),
	foreign key (AnimalId) references Animals(Id)
)

create table VolunteersDepartments
(
	Id int primary key identity,
	DepartmentName varchar(30) not null
)

create table Volunteers
(
	Id int primary key identity,
	[Name] varchar(50) not null,
	PhoneNumber varchar(15) not null,
	[Address] varchar(50),
	AnimalId int foreign key references Animals(Id),
	DepartmentId int foreign key references VolunteersDepartments(Id) not null
)

use Zoo
insert into Volunteers
values 
('Anita Kostova', '0896365412', 'Sofia, 5 Rosa str.', 15, 1),
('Dimitur Stoev', '0877564223', null, 42, 4),
('Kalina Evtimova', '0896321112', 'Silistra, 21 Breza str.', 9, 7),
('Stoyan Tomov', '0898564100', 'Montana, 1 Bor str.', 18, 8),
('Boryana Mileva', '0888112233', null, 31, 5)

insert into Animals 
values
('Giraffe', '2018-09-21', 21, 1),
('Harpy Eagle', '2015-04-17', 15, 3),
('Hamadryas Baboon', '2017-11-02', null, 1),
('Tuatara', '2021-06-30', 2, 4)


update Animals
set OwnerId = (select Id from Owners where [Name] = 'Kaloqn Stoqnov')
where OwnerId is null

declare @departmentId int = (select Id from VolunteersDepartments where DepartmentName = 'Education program assistant');

delete from Volunteers
where DepartmentId = @departmentId
delete from VolunteersDepartments 
where Id = @departmentId

