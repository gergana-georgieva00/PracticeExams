create database Airport

create table Passengers
(
	Id int primary key identity,
	FullName varchar(100) not null unique,
	Email varchar(50) not null unique
)

create table Pilots
(
	Id int primary key identity,
	FirstName varchar(30) not null unique,
	LastName varchar(30) not null unique,
	Age tinyint check (Age >= 21 and Age <= 62) not null,
	Rating float check(Rating >= 0.0 and Rating <= 10.0)
)

create table AircraftTypes
(
	Id int primary key identity,
	TypeName varchar(30) not null unique
)

create table Aircraft
(
	Id int primary key identity,
	Manufacturer varchar(25) not null,
	Model varchar(30) not null,
	[Year] int not null,
	FlightHours int,
	Condition char(1) not null,
	TypeId int foreign key references AircraftTypes(Id) not null
)

create table PilotsAircraft
(
	AircraftId int not null,
	PilotId int not null,
	primary key(AircraftId, PilotId),
	foreign key (AircraftId) references Aircraft(Id),
	foreign key (PilotId) references Pilots(Id)
)

create table Airports
(
	Id int primary key identity,
	AirportName varchar(70) unique not null,
	Country varchar(100) unique not null
)

create table FlightDestinations
(
	Id int primary key identity,
	AirportId int foreign key references Airports(Id) not null,
	[Start] DateTime not null,
	AircraftId int foreign key references Aircraft(Id) not null,
	PassengerId int foreign key references Passengers(Id) not null,
	TicketPrice decimal(18, 2) default 15 not null
)

insert into Passengers (FullName, Email)
select 
concat(FirstName, ' ', LastName),
concat(FirstName, LastName, '@gmail.com')
from Pilots as p
where Id between 5 and 15

update Aircraft
set Condition = 'A'
where Condition in ('C', 'B')
	  and (FlightHours is null or FlightHours <= 100)
	  and [Year] >= 2013
	  
delete from Passengers 
where len(FullName) <= 10

select Manufacturer, Model, FlightHours, Condition
from Aircraft
order by FlightHours desc

